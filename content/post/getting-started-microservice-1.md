---
title: "微服务架构系列：微服务基础"
date: 2019-10-25T16:01:46+08:00
draft: false
categories: "microservice"
toc: true
---
&emsp;如今，微服务已经成为了一种新的架构时尚。这个系列将为大家介绍，什么是微服务？微服务有哪些工具？这些工具有什么特点？

## 1.0 微服务介绍
&emsp;微服务最早是在2014年由Martin Fowler和James Lewis共同提出，他们提出了[微服务指南](https://martinfowler.com/microservices/)。

&emsp;微服务架构风格是一种使用一套小服务来开发单个应用的方式途径，每个服务运行在自己的进程中，并使用轻量级机制通信，通常是HTTP API，这些服务基于业务能力构建，并能够通过自动化部署机制来独立部署，这些服务使用不同的编程语言实现，以及不同数据存储技术，并保持最低限度的集中式管理。

## 2.0 架构历史

### 2.1 传统单体式架构

&emsp;企业发展早期，大部分的web工程是将所有的功能模块打包部署到一起，以减少部署节点和成本。以JAVA为例，很多企业会将应用程序打包为jar包。其他语言（Python、Go等）写的程序也是类似的方式。

&emsp;假设我们需要构建一个电商网站：客户能够线上查询商品、下订单，并将货物运输给客户。很快，我们就能构造出如下图所示的系统。

![传统单体式架构](../images/microservice/单体式架构.png)

&emsp;它的优势在于:

1. 单体架构，应用架构相对简单，部署简单。


&emsp;它的劣势在于:

1. 不利于后期维护，修改一个地方就要将整个应用全部部署。
2. 所有模块集中在一个二进制文件，打包时间过长。
3. 回归测试周期过长，每次修改都需要对所有功能进行一遍回归测试。
4. 在扩容时，需要进行对所有模块进行整体扩容，不利于弹性伸缩。

### 2.2 SOA
&emsp;“面向服务的架构（Service Oriented Architecture）”:这是一种设计方法，其中包含多个服务， 服务之间通过相互依赖最终提供一系列的功能。一个服务通常以独立的形式存在与操作系统进程中。各个服务之间通过网络调用。

&emsp;在SOA有个重要的东西叫:**企业服务总线(ESB)**。ESB的作用就是一根管道，用来连接各个服务节点。为了集成不同系统，不同协议的服务，ESB做了消息的转化解释和路由工作，让不同的服务互联互通。

![SOA架构](../images/microservice/SOA架构.jpg)

&emsp;它的优势在于:

1. 简化系统开发，根据同样的开放标准，可以直接利用现有资源进行组合。
2. 服务设计松耦合，更好的适应性和扩展性。


&emsp;它的劣势在于:

1. ESB较为笨重，大大增加了系统的复杂性和可维护性。

### 2.3 微服务
&emsp;微服务实际与SOA类似，但它在SOA上做了升华。微服务架构强调的重点就是"业务需要彻底的组件化和服务化"。将原有的传统型应用逐步拆分成多个可独立开发、设计、运行的小应用服务，他们之间可以通过服务完成交互和集成。例如下图所示:

![传统向微服务架构转型](../images/microservice/传统向微服务架构转型.png)

&emsp;它的优势在于:

1. 按照实际业务划分服务和开发团队，每个服务可以独立部署。
2. 服务组件化，每个人只需要专注于自己的服务，提升开发效率。
3. 去中心化，每个微服务都有自己的数据库持久化。


&emsp;它的劣势在于:

1. 由于拆分后，服务增多，系统复杂度增高 。

## 3.0 微服务组件
&emsp;由于系统拆分后，复杂度增加，需要一些组件支持。从下章开始，我们将一个个详细介绍微服务相关的组件，以及相关的技术构成。下图为微服务架构知识图谱:

![微服务知识图谱](../images/microservice/微服务知识图谱.jpg)


