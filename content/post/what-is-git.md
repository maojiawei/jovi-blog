---
title: "Git是什么?-分布式版本管理探索"
date: 2019-03-25T10:23:24+08:00
draft: false
categories: "devops"
tags: ["git"]
toc: false
---
&emsp;Git是一款免费，开源的分布式版本管理系统，它的设计理念在于不管是多大的项目都可以快速高效地处理任何事情。它由Linux之父Linus Torvalds开发。Git具有实用、高性能、安全、可扩展的特点，能够满足大多数团队和开发人员需要。它在DevOps中也担任了分布式版本控制这一重要的工作。  
&emsp;在本篇文章中，将涉及一下几个方面：

- Git为何存在？
- Git是什么？
- Git的特点
- Git在DevOps中担任什么角色？
- 微软等公司如何使用Git？

## Git为何存在？
&emsp;我们都知道：必要是一切发明的母亲。同样，Git的开发是满足之前开发人员所面临的必然问题。所以，我们退一步来看看Git之前的(VCS)，再进一步了解Git为何存在。  
&emsp;版本管理用于管理文件、程序、大型网站以及其他信息的改变。   
&emsp;目前有两种版本管理的方式(VCS):

- 集中式版本管理系统(Centralized Version Control System 缩写:CVCS)
- 分布式版本管理系统(Distributed Version Control System 缩写:DVCS)

### 集中式版本管理系统
&emsp;集中式版本管理系统(CVCS)采用一台中央服务器，它可以保存所有的文件，并用于团队协作。它有一台单一的服务器，用户可以直接访问它来进行操作。  
&emsp;我们通过下图来更好地了解集中式版本管理系统:

 ![集中式版本管理系统](../images/devops/集中式版本管理系统.png)

&emsp;在上图中，仓库是一个中央服务器，它可以为本地或者远程的，但需要与其他开发者的个人工作站直接连接。     
&emsp;每位程序员可以将仓库的文件提取或更新(update)他们自己个人工作站上的文件，也可以在自己的本地修改并提交(commit)至仓库。每个操作都直接表现在仓库中。  
&emsp;即使这看上去什么便捷，但依然有一些缺点。例如:

- 仓库不在本地；这就意味着你需要连接网络才可以提交(commit)你的操作。
- 因为所有的都是集中式的，如果服务器宕机或者损坏，你将遗失所有的数据。

这就是分布式版本管理系统(DVCS)解决的问题。

### 分布式版本管理系统
&emsp;分布式版本管理系统不会依赖于一个集中式服务器来存储一个项目所有文件的所有版本。  
&emsp;在分布式环境下，每个参与者本地都会有个备份或者"克隆"的主仓库。每个人都保存了一份他们自己的本地仓库，包含了当前版本中所有文件和元数据。  
&emsp;我们可以通过下图来理解:

 ![分布式版本管理系统](../images/devops/分布式版本管理系统.jpg)

&emsp;就如上图所示，每个程序员保存了一份本地仓库，它是一个中央仓库的备份或者克隆，可以在任何时候提交(commit)或更新(update)。  
&emsp;它们可以通过从中央仓库获取新的数据对本地进行更新，这个操作称为"pull"。也可以将本地仓库中的更改发送至中央仓库，这个操作称为"push"。  
&emsp;这种将一个完整地仓库完全克隆至本地的方式有以下几种优势：

- 所有的操作(除了push和pull)是非常快的，因为只需要写入本地硬盘，没有远程服务器。因此，也不需要网络。
- 提交(commit)新的变更集可以本地操作，不需要连接远程服务器。一旦你有一组变更集，你可以一次性push至远程仓库。
- 因为每个参与人都有一个完整副本的仓库，如果他们希望在更新远程仓库前得到一些反馈，他们可以与别人分享变更。
- 如果中央服务器在任何时候宕机，丢失的数据会可以从其中一个参与人中很容易地恢复。

&emsp;在了解了分布式版本管理系统之后，我们来聊聊什么是Git。

## Git是什么？
&emsp;Git是一个分布式版本管理系统，它可以支持分布式非线性工作流，为开发高质量的软件提供数据保证。  
&emsp;Git提供了一个上述所有关于分布式版本管理系统的功能。Git仓库可以很容易地查询和访问。你将通过下文了解它是多么灵活和高兼容。

## Git的特性
### 免费开源
&emsp;Git主要是基于GPL's(General Public License)的开源认证。你不需要购买它，因为它是免费的。因为它是开源的，所以你可以在你需要的时候修改源代码。
### 速度
&emsp;因为你不需要连接网络做任何的操作，因此它能高速地完成所有任务。根据Mozilla的性能测试显示：它比其他版本控制系统快一个数量级。取版本历史(fetch)从一个本地的仓库比远程的仓库要快1百多倍。最核心的一点是Git由C语言进行开发，这避免了其他高级语言相关的运行时开销。
### 可扩展性
&emsp;Git是可扩展的。所以，如果在未来，如果采用Git的参与者增加，Git能很容易地处理这个问题。虽然Git存储了一个完成的仓库，但存储在客户端的数据是非常小的，这是因为Git通过无损压缩技术压缩了大量数据。
### 可靠性
&emsp;因为每个参与者都会有一份自己独立的仓库，如果面临系统损坏，丢失的数据也可以从其他本地仓库进行恢复。你永远有一份备份的数据。
### 安全性
&emsp;Git在仓库中采用SHA1(Secure Hash Function)加密方式来命名和识别对象。每个文件或提交都需要在校验的时候通过校验码进行验证和检索。Git存储历史的方式在于特定版本的ID(Git术语中的提交)，这取决于完整开发版本的历史记录。一旦提交，在不被发现的情况下改变历史版本是不可能的。
### 经济性
&emsp;对于集中式版本管理系统，中央服务器需要足够的性能来处理整支团队的所有请求。对于小型团队来说，这不是问题，但是随着团队的规模增长，硬件限制变成了一种性能瓶颈。而在于分布式环境下，开发人员不用直接与服务器进行交互操作，除非进行push或者pull的操作。所有的压力在于客户端，因此相对于服务端的就变得很轻松。
### 非线性开发支持
&emsp;Git支持快速创建分支与合并，也提供了查看和导航一个非线性的开发历史。在Git中有一个核心的假设：相比与写，更改更会频繁地合并，因为它会传递给各种审阅者。分支(branch)在Git中是非常轻量级的。在Git中，分支就是个简易的提交。随着先前的提交，整个分支的结构将显示出来。
### 分支操作简便
&emsp;在Git中，分支管理是非常简单的，只需要花费少量的时间即可进行创建、删除和合并分支。分支提供了一个特别的环境，你可以在自己的代码基础上作任何更改。当一个开发人员开始做某件任务的时候，不管大或者小，都可以建立一个分支。这确保了master分支上永远是生产代码。
### 分布式开发
&emsp;Git为每位开发人员提供了一份完整开发历史的备份，更改也会从其他仓库中拷贝。这些更改将会导入一个另外的开发分支，并且可以以同样的方式导入本地的开发分支。
### 现存系统或协议兼容
&emsp;我们可以通过http,ftp,Git或者ssh来提交仓库。Git也包含了并发版本系统(CVS)服务模拟，这可以使得现存的CVS客户端和IDE插件可以更容易地操作Git仓库。Apache SVN和SVK仓库也可以通过GIT-SVN直接使用。

## Git在DevOps中担任什么角色？
&emsp;现在我们知道了什么是Git，你将了解Git是在DevOps中是多么重要的一块。  
&emsp;DevOps是一种为开发和运维实现敏捷的实践。这也是一个全新的概念，席卷了全球的IT组织，推动了项目的生命周期，增来了利润。DevOps促进了开发工程师与运维在整个服务的生命周期中的互相协作，从设计到开发再到生产支持。  
&emsp;下图揭示了DevOps的生命周期以及Git如何在DevOps中使用。

 ![GIT在DevOps中的角色](../images/devops/Git-in-devops.jpg)

&emsp;在上图中显示了在一个完整地DevOps的生命周期中，首先从规划开始，直至开发和监控。Git在其中起了非常重要的任务，它用于管理代码，可以让众多参与者往共享的仓库贡献自己的代码。这些代码可以被提取，在持续集成中可以构建和打包，并最终发布至生产环境。  
&emsp;Git也可以促进开发团队和运维团队的交流。当我们开发一个有大量的成员的大型项目时，管理更改是非常重要的。Git的提交信息功能对于团队内部的交流是很重要的。我们部署的任何部分都应该来源于像Git一样的版本控制系统。为了成功实现DevOps，你需要版本控制系统。因此Git在DevOps中担任了重要的作用。

## 企业案例
&emsp;Git相比于市场上其他的版本控制系统,例如:SVN,CVS等等更受欢迎。你可以从下图中找到Git的发展趋势。

 ![企业案例](../images/devops/Git-Interest-By-Time-Graph-What-Is-Git-Edureka-1-e1478510696216.png)
 
&emsp;在大型公司里，产品由全球不同的开发工程师进行开发。为了便于相互间管理，Git是一个很棒的解决方案。   
&emsp;在Facebook,Yahoo,Zynga,Quora,Twitter,eBay,Salesforce,Microsoft等等公司，都在使用Git作为版本管理。  
&emsp;根据最新的调查显示，Microsoft所有新的开发工作都由Git进行开发。Microsoft正在迁移.NET以及一些新的开源项目至GITHUB(基于GIT的代码仓库)。  
&emsp;其中最著名的是LightGBM。这是一种快速、分布式、高性能的梯度增强框架。它主要基于决策树算法，可以用于排名，归类以及其他机器学习场景。
&emsp;因此，Git担任了一个重要的任务在LightGBM的开发过程中。



